{% extends 'base.html' %}
{% load static %}

{% block content %}
<div>
    <h1>Dashboard Conseiller</h1>
    
    <section>
        <h2>Créer un nouvel utilisateur</h2>
        <form id="createUserForm">
            <div>
                <label for="username">Nom d'utilisateur</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div>
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div>
                <label for="password">Mot de passe</label>
                <input type="password" id="password" name="password" required>
            </div>
            <button type="submit">Créer l'utilisateur</button>
        </form>
    </section>

    <section>
        <h2>Liste des utilisateurs</h2>
        <table id="usersTable">
            <thead>
                <tr>
                    <th>Nom d'utilisateur</th>
                    <th>Email</th>
                    <th>Rôle</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </section>
</div>

{% block extra_js %}
<script src="{% static 'accounts/js/advisor_dashboard.js' %}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const token = '{{ request.session.token }}';
        const baseUrl = 'http://localhost:8000/api/v1';
        window.userManager = new UserManager(token, baseUrl);
        userManager.init();
    });
</script>
{% endblock %}
{% endblock %}